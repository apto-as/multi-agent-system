# TMWS v1 Unified Configuration
# Simple, robust, production-ready

# Service Information
service:
  name: "TMWS"
  version: "1.0.0"
  description: "Trinitas Memory & Workflow Service"

# Server Configuration
server:
  host: "0.0.0.0"
  port: 8000
  workers: 4
  reload: false  # Set to true for development
  
# MCP Configuration
mcp:
  enabled: true
  port: 8001
  
# Database (PostgreSQL + pgvector)
database:
  url: "${TMWS_DATABASE_URL}"
  pool_size: 10
  max_overflow: 20
  echo: false  # Set to true for SQL debugging
  
# Redis Configuration
redis:
  url: "${TMWS_REDIS_URL}"
  ttl: 3600  # Cache TTL in seconds
  
# Security
security:
  secret_key: "${TMWS_SECRET_KEY}"
  jwt_secret: "${TMWS_JWT_SECRET}"
  jwt_expire_minutes: 30
  rate_limit_period: 100
  cors_origins:
    - "http://localhost:3000"
    - "http://127.0.0.1:3000"
    - "http://localhost:8000"
    
# Logging
logging:
  level: "INFO"
  format: "json"
  file: "./logs/tmws.log"
  
# Vector Search
vector:
  dimension: 384
  model: "all-MiniLM-L6-v2"

# GenAI Toolbox Integration
genai_toolbox:
  enabled: true
  binary_path: "${GENAI_TOOLBOX_PATH}"  # Path to GenAI Toolbox binary
  auto_detect: true  # Auto-detect GenAI Toolbox installation
  sidecar_mode: true  # Run tools as sidecar processes

  # Tool-specific configurations
  tools:
    genai-chat:
      enabled: true
      provider: "openai"
      model: "gpt-4o-mini"
      max_tokens: 4000

    genai-image:
      enabled: true
      provider: "dall-e"
      size: "1024x1024"
      quality: "standard"

    genai-code:
      enabled: true
      language: "auto"
      style: "production"
      max_lines: 500

    genai-document:
      enabled: true
      format: "markdown"
      style: "technical"
      max_length: 10000

  # Performance settings
  performance:
    max_concurrent_processes: 4
    process_timeout_seconds: 300
    memory_limit_mb: 512
    enable_monitoring: true

  # Integration settings
  integration:
    store_results_in_memory: true
    memory_importance_default: 0.7
    enable_cost_tracking: true
  
# Environment-specific overrides
environments:
  development:
    server:
      reload: true
    database:
      echo: true
    logging:
      level: "DEBUG"
      
  production:
    server:
      workers: 8
    security:
      rate_limit_period: 1000
    logging:
      level: "WARNING"